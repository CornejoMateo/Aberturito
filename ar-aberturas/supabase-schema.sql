create table if not exists public.profiles (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  category character varying not null,
  type character varying not null,
  line character varying not null,
  color character varying not null,
  status character varying not null,
  quantity smallint not null,
  site character varying not null,
  width numeric not null,
  material character varying not null,
  last_update timestamp with time zone null,
  constraint profiles_pkey primary key (id),
  constraint quantity_positive check ((quantity >= 0)),
  constraint width_range check ((width > (0)::numeric))
) TABLESPACE pg_default;

create table if not exists public.lines (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name_line character varying not null,
  opening character varying not null,
  constraint Lines_pkey primary key (id),
  constraint lines_name_line_key unique (name_line),
  constraint opening_valid check (
    (
      (opening)::text = any (
        (
          array[
            'Aluminio'::character varying,
            'PVC'::character varying
          ]
        )::text[]
      )
    )
  )
) TABLESPACE pg_default;

create table if not existspublic.colors (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  line_name character varying not null,
  name_color character varying not null,
  constraint colors_pkey primary key (id),
  constraint colors_color_line_unique unique (name_color, line_name),
  constraint colors_line_name_fkey foreign KEY (line_name) references lines (name_line) on update CASCADE
) TABLESPACE pg_default;

create table if not exists public.types (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name_type character varying not null,
  line_name character varying null,
  constraint types_pkey primary key (id),
  constraint types_name_type_key unique (name_type),
  constraint types_line_name_fkey foreign KEY (line_name) references lines (name_line) on update CASCADE
) TABLESPACE pg_default;

create table if not exists public.sites (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name_site character varying not null,
  constraint sites_pkey primary key (id),
  constraint sites_name_site_key unique (name_site)
) TABLESPACE pg_default;